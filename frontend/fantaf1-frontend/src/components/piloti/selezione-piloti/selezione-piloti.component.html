<div class="selezione-container">
  <h3>Countdown alla chiusura delle selezioni</h3>
  <div class="countdown">{{ countdownString }}</div>

  <h3>Prossima gara</h3>
  <div class="next-race">
    <p>
      <strong>{{ gara?.raceName }}</strong> ({{ gara?.country }})
    </p>
    <p>
      Data:
      {{ gara?.dateTimeRace | date : "dd/MM/yyyy HH:mm" : "short" : "it-IT" }}
    </p>
    <p>Circuito: {{ gara?.circuitName }}</p>
  </div>

  <h3>Seleziona i tuoi piloti</h3>
  <form>
    <div class="pilota-select" *ngFor="let slot of [1, 2, 3]; let i = index">
      <mat-form-field appearance="fill">
        <mat-label>Pilota {{ slot }}</mat-label>
        <mat-select
          [disabled]="isSelectDisabled()"
          (selectionChange)="onSelectPilota($event.value, i)"
        >
          <mat-option
            *ngFor="let pilota of getPilotiDisponibili(i)"
            [value]="pilota"
          >
            {{ pilota.nome }} {{ pilota.cognome }} ({{ pilota.costo }} crediti)
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <h4>Piloti selezionati:</h4>
    <ul>
      <li *ngFor="let p of pilotiSelezionati">
        {{ p.nome }} {{ p.cognome }} - {{ p.costo }} crediti
      </li>
    </ul>

    <div class="totale">
      <p>
        Totale speso: <strong>{{ totaleCosto }} crediti</strong>
      </p>
      <p>
        Budget rimanente: <strong>{{ budgetRimanente }} crediti</strong>
      </p>
    </div>

    <button
      mat-raised-button
      color="primary"
      type="button"
      [disabled]="isButtonDisabled()"
      (click)="confermaSelezione()"
    >
      Conferma Selezione
    </button>
  </form>
</div>
